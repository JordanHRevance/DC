# URL MASTER
domain: url
domainOwner: Alexis Zecharies
domainOwnerEmail: alexis.zecharies@revance.com
partionedOn: URL
quantumName: url quantum
usagePurpose: To keep inventory of urls that belong to practices, as well as track how relevant these urls and associated practices are using custom scoring.
description: Tables and attributes related to URLs. Urls are tools for marketing used by only a subset of practices. Some use multiple urls.
limitations: Financial Reporting, and any other uses that require  1 on 1 accuracy, since one practice can have many urls.
version: 0.0.1
status: current
uniqueContractId: 25da803a-9bad-4caf-bd28-1318d57af812
activeDate: null
nextReassessmentDate: null
tenant: Revance

# Getting support (Should probably use an email DL instead of this system)
teamSupportDl: dl.dd@revance.com
teamSupportSlackChannel: null

# Physical parts
sourcePlatform: snowflake
sourceSystem: snowflake

kind: virtualDataset
type: tables

# Physical access
database: staging_test
schema: cdp

# Tags
tags: link, website, web address, web page, page, hyperlink

# ----------------------------------------------------------
# Dataset and Schema
dataset:
  - table: url master
    sourceTables:
      - STITCH_DEV.CDPSTAGE.URL_MASTER_STG
      - STITCH_DEV.CDPRAW.URL_MASTER_RAW
      - STAGING_DEV.SALES.VW_ACCOUNT
      - STAGING_DEV.OPUL_CRM.ACCOUNT
      - STITCH_DEV.CDPRAW.PAI_GOOGLEMAPS_RAW
      - STITCH_DEV.CDPRAW.PAI_YELP_RAW
      - STITCH_DEV.CDPRAW.PAI_CARECREDIT_RAW
      - STITCH_DEV.CDPRAW.PAI_REALSELF_RAW
      - STITCH_DEV.CDPRAW.FINDURL_CARECREDIT
      - STITCH_DEV.CDPRAW.PAI_NO_URLS_FACEBOOK
      - STITCH_DEV.CDPRAW.FINDURL_NPI_APRIL
      - STITCH_DEV.CDPRAW.FINDURL_YELP
      - STITCH_DEV.CDPRAW.PAI_LINKEDIN_CO_SEARCH_RAW
      - STITCH_DEV.CDPRAW.PAI_LINKEDIN_CO_WEB_RAW
      - STITCH_DEV.CDPRAW.PAI_LINKEDIN_CO_WKEXP_RAW
      - STITCH_DEV.CDPRAW.PAI_INSTAGRAM_RAW
      - STITCH_DEV.CDPRAW.PAI_WEBPAGE_RAW
      - STITCH_DEV.CDPRAW.PAI_WEBSCRAPING_RAW
      - STITCH_DEV.CDPRAW.PAI_AESTHETICSOCIETY_RAW
    physicalName: STAGING_DEV.CDP.URL_MASTER
    description: Master dimension of all urls
    tags: null
    dataGranularity: One row per url
    columns:
      - column: url_key
        isPrimary: true
        businessName: url primary identifier
        logicalType: string
        physicalType: VARCHAR(16777216)
        maxLen: 11 (fixed)
        isNullable: false
        description: identifies a distinct url.  used to join with other dimension and fact tables already having url_key
        criticalDataElementStatus: identifies the unique url
        tags: null
        transformSourceTables:
          - STITCH_DEV.CDPSTAGE.URL_MASTER_STG
          - STAGING_DEV.CDP.URL_MASTER
        transformLogic: autogenerated incremental numbers
        transformDescription: incremental number values autogenerated in STITCH_DEV.CDPSTAGE.URL_MASTER_STG and formatted in STAGING_DEV.CDP.URL_MASTER
        sampleValues: URL10978798, URL10978799
      - column: url
        isPrimary: false
        businessName: url
        logicalType: string
        physicalType: VARCHAR(16777216)
        maxLen: 173
        isNullable: false
        description: cleaned up website to hold only its respective url value
        criticalDataElementStatus: actual url dimension of a website
        tags: null
        transformSourceTables: sourced from all of the raw tables mentioned in the table list
        transformLogic:
          - unique urls are sorted and populated into STITCH_DEV.CDPRAW.URL_MASTER_RAW
          - deduped per url granularity is populated into STITCH_DEV.CDPSTAGE.URL_MASTER_STG
          - post url_key value generation populated into the final table STAGING_DEV.CDP.URL_MASTER
        transformDescription: Hygiene applied to the sourced websites
        sampleValues: fantybeautywellness.com, aibypolly.com, vivereaesthetics.com
      - column: domain
        isPrimary: false
        businessName: url domain name
        logicalType: string
        physicalType: VARCHAR(16777216)
        maxLen: 69
        isNullable: false
        description: for populated url, domain value is derived to populate this column
        criticalDataElementStatus: domain value of the respective website is hygiened which will be used as a lookup to related tables
        tags: null
        transformSourceTables: sourced from all of the raw tables mentioned in the table list
        transformLogic:
          - domains derived from unique urls populated into STITCH_DEV.CDPSTAGE.URL_MASTER_STG
          - post url_key value generation populated into the final table STAGING_DEV.CDP.URL_MASTER
        transformDescription: Hygiene applied to the derived domain values
        sampleValues: fantybeautywellness, aibypolly, vivereaesthetics
      - column: hp_score
        isPrimary: false
        businessName: business score 
        logicalType: string
        physicalType: VARCHAR(16777216)
        maxLen: 5
        isNullable: false
        description: business score to identify how reliable the website to refer to as a practice.
        criticalDataElementStatus: true
        tags: null
        transformSourceTables: sourced from all of the raw tables mentioned in the table list
        transformLogic: derived based of score distribution as of current iteration any score greater than equal to 20 is defined as a practice                        
        transformDescription: derived value based of predefined algorithm
        sampleValues: 48.56, 36.56, 37.96
      - column: url_status
        isPrimary: false
        businessName: url status
        logicalType: string
        physicalType: VARCHAR(16777216)
        maxLen: 2
        isNullable: false
        description: segmenting url based of the score
        criticalDataElementStatus: essential to segment urls
        tags: null
        transformSourceTables: STITCH_DEV.CDPSTAGE.URL_MASTER_STG
        transformLogic:
          - if HP_SCORE is >= 20 then 2
          - if Practice Source is from OCE or OPUL then 1
          - if HP_SCORE is between 0 AND 19.99 THEN 0
          - if HP_SCORE = -1 then -1; it represents connection error
          - for all other exceptions like Invalid Domain etc.. the value is assigned as -2
        transformDescription: urls are segmented based of the scores generated by pre-defined algorithm
        sampleValues: 2, 1, 0, -1, -2
      - column: load_date
        isPrimary: false
        businessName: load date when the url is populated into the table
        logicalType: string
        physicalType: VARCHAR(16777216)
        maxLen: 23 (fixed)
        isNullable: false
        description: identifies when the url is populated into the final table STAGING_DEV.CDP.URL_MASTER
        criticalDataElementStatus: identifies when the url load process got completed successfully
        tags: null
        transformSourceTables: STAGING_DEV.CDP.URL_MASTER
        transformLogic: autogenerated for every run
        transformDescription: date of successful completion of the url process
        sampleValues: 2023-07-11 08:58:09.627
      - column: modified_date
        isPrimary: false
        businessName: modified date
        logicalType: string
        physicalType: VARCHAR(16777216)
        maxLen: 0
        isNullable: true
        description: 'date the url was modified(if not modified, default to null)'
        criticalDataElementStatus: null
        tags: null
        transformSourceTables: null
        transformLogic: null
        transformDescription: when a url value is modified the column gets updated
        sampleValues: 2023-08-11 08:58:09.627
  - table: url master view
    sourceTables: STAGING_DEV.CDP.URL_MASTER
    physicalName: STAGING_DEV.CDP.VW_URL_MASTER
    description: view for url master containing url, domain, and hp_score
    tags: view
    dataGranularity: one row per URL
    columns:
      - column: url
        isPrimary: false
        businessName: business url
        logicalType: string
        physicalType: VARCHAR(16777216)
        maxLen: 68
        isNullable: false
        description: uniform resource locator sourced from url master table
        criticalDataElementStatus: true
        tags: null
        transformSourceTables: null
        transformLogic: null
        transformDescription: null
        sampleValues: fantybeautywellness.com, aibypolly.com, vivereaesthetics.com
      - column: domain
        isPrimary: false
        businessName: url domain name
        logicalType: string
        physicalType: VARCHAR(16777216)
        maxLen: 65
        isNullable: false
        description: domain name of the url
        criticalDataElementStatus: false
        tags: null
        transformSourceTables: null
        transformLogic: null
        transformDescription: null
        sampleValues: fantybeautywellness, aibypolly, vivereaesthetics
      - column: hp_score
        isPrimary: false
        businessName: url score
        logicalType: string
        physicalType: VARCHAR(16777216)
        maxLen: 5 (fixed)
        isNullable: false
        description: business score to identify how reliable the website to refer to as a practice. Ranges from 0-100
        criticalDataElementStatus: true
        tags: null
        transformSourceTables: null
        transformLogic: null
        transformDescription: null
        sampleValues: 34.56, 23.00
# ----------------------------------------------------------
# Stakeholders

contractStakeholders: 
  - name: David Austin
    email: david.austin@revance.com
    role: Data Innovation Manager
    dateIn: 2023-04-10
    dateOut: null
    replacedByUsername: null

# ----------------------------------------------------------
# Roles
- role: datagov_r
  access: read only
  approvers:
    - name: IT
      approvalLevel: 1
- role: datagov_rw
  access: read and write
  approvers:
    - name: Senthil Salvaraj
      approvalLevel: 1
    - name: Parker Hanna
      approvalLevel: 1
